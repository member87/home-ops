pages:
  - name: Home

    columns:
      - size: small
        widgets:
          - type: calendar

          - type: weather
            location: London, United Kingdom
            units: metric


      - size: full
        widgets:
          - type: monitor
            cache: 1m
            title: Services
            sites:
              - title: PiHole
                url: https://pihole.lab.jackhumes.com/admin
                icon: si:pihole
                alt-status-codes:
                  - 401
              - title: ArgoCD
                url: https://argocd.lab.jackhumes.com
                icon: si:argo
                alt-status-codes:
                  - 401
              - title: Authelia
                url: https://auth.jackhumes.com
                icon: si:authelia
              - title: LLDAP
                url: https://lldap.lab.jackhumes.com
                icon: si:authelia
                alt-status-codes:
                  - 401
              - title: Glance
                url: https://glance.lab.jackhumes.com
                icon: si:glance
              - title: IP Checker
                url: https://ip-checker.lab.jackhumes.com
                icon: si:speedtest
              - title: Podinfo
                url: https://podinfo.lab.jackhumes.com
                icon: si:kubernetes
              - title: Headscale
                url: https://headscale.jackhumes.com/health
                icon: si:tailscale
              - title: Prometheus
                url: https://prometheus.lab.jackhumes.com
                icon: si:prometheus
                alt-status-codes:
                  - 401
              - title: Grafana
                url: https://grafana.lab.jackhumes.com
                icon: si:grafana
                alt-status-codes:
                  - 401
              - title: NetFlow Dashboard
                url: https://grafana.lab.jackhumes.com/d/goflow2-netflow/network-flow-analysis
                icon: si:grafana
                alt-status-codes:
                  - 401

          - type: monitor
            cache: 1m
            title: Media Stack
            sites:
              - title: Jellyfin
                url: https://jellyfin.lab.jackhumes.com
                icon: si:jellyfin
              - title: Sonarr
                url: https://sonarr.lab.jackhumes.com
                icon: si:sonarr
              - title: Radarr
                url: https://radarr.lab.jackhumes.com
                icon: si:radarr
              - title: Prowlarr
                url: https://prowlarr.lab.jackhumes.com
                icon: https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/prowlarr.png
              - title: Bazarr
                url: https://bazarr.lab.jackhumes.com
                icon: https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/bazarr.png
              - title: qBittorrent
                url: https://qbittorrent.lab.jackhumes.com
                icon: si:qbittorrent
              - title: SABnzbd
                url: https://sabnzbd.lab.jackhumes.com
                icon: https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/png/sabnzbd.png
              - title: Qui (qBittorrent UI)
                url: https://qui.lab.jackhumes.com
                icon: si:qbittorrent

          - type: hacker-news
            limit: 15
            collapse-after: 5
                
          - type: videos
            channels:
              - UCUyeluBRhGPCW4rPe_UvBZQ # ThePrimeagen
              - UCXuqSBlHAE6Xw-yeJA0Tunw # Linus Tech Tips  
              - UCrUL8K81R4VBzm-KOYwrcxQ # Dreams of Code
              - UCsBjURrPoezykLs9EqgamOA # Fireship
            collapse-after: 3


          - type: group
            widgets:
              - type: reddit
                subreddit: unixporn
                show-thumbnails: true
                limit: 10
                collapse-after: 5
              - type: reddit
                subreddit: technology
                limit: 10
                collapse-after: 5
              - type: reddit
                subreddit: science
                limit: 10
                collapse-after: 5

      - size: small
        widgets:
          - type: clock
            hour-format: 24h

          - type: repository
            repository: member87/home-ops
            pull-requests-limit: 5
            issues-limit: 3
            commits-limit: 3

          - type: custom-api
            title: London Transport Status
            cache: 15m
            template: |
              <div class="flex flex-column gap-5">
                {{ with .Options.lines }}
                  {{ range . }}
                    {{ with newRequest (printf "https://api.tfl.gov.uk/line/%s/status" .) | withHeader "User-Agent" "Glance-Dashboard/1.0" | getResponse }}
                      {{ if eq .Response.StatusCode 200 }}
                        {{ range .JSON.Array "" }}{{ template "line" . }}{{ end }}
                      {{ end }}
                    {{ end }}
                  {{ end }}
                {{ else }}
                  {{ with newRequest "https://api.tfl.gov.uk/line/mode/dlr/status" | withHeader "User-Agent" "Glance-Dashboard/1.0" | getResponse }}
                    {{ if eq .Response.StatusCode 200 }}{{ range .JSON.Array "" }}{{ template "line" . }}{{ end }}{{ end }}
                  {{ end }}
                  {{ with newRequest "https://api.tfl.gov.uk/line/mode/tube/status" | withHeader "User-Agent" "Glance-Dashboard/1.0" | getResponse }}
                    {{ if eq .Response.StatusCode 200 }}{{ range .JSON.Array "" }}{{ template "line" . }}{{ end }}{{ end }}
                  {{ end }}
                  {{ with newRequest "https://api.tfl.gov.uk/line/mode/elizabeth-line/status" | withHeader "User-Agent" "Glance-Dashboard/1.0" | getResponse }}
                    {{ if eq .Response.StatusCode 200 }}{{ range .JSON.Array "" }}{{ template "line" . }}{{ end }}{{ end }}
                  {{ end }}
                  {{ with newRequest "https://api.tfl.gov.uk/line/mode/overground/status" | withHeader "User-Agent" "Glance-Dashboard/1.0" | getResponse }}
                    {{ if eq .Response.StatusCode 200 }}{{ range .JSON.Array "" }}{{ template "line" . }}{{ end }}{{ end }}
                  {{ end }}
                {{ end }}
              </div>

                {{ define "line" }}
                {{ $id := .String "id" }}{{ $status := (index (.Array "lineStatuses") 0).String "statusSeverityDescription" }}
                <div class="flex justify-between items-center" style="padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                  <div class="flex items-center gap-10">
                    <div style="width: 20px; height: 4px; border-radius: 2px; background-color: {{ if eq $id "bakerloo" }}#B36305{{ else if eq $id "dlr" }}#01a7a2{{ else if eq $id "central" }}#E32017{{ else if eq $id "circle" }}#FFD300{{ else if eq $id "district" }}#00782A{{ else if eq $id "hammersmith-city" }}#F3A9BB{{ else if eq $id "jubilee" }}#A0A5A9{{ else if eq $id "metropolitan" }}#9B0056{{ else if eq $id "northern" }}#000000{{ else if eq $id "piccadilly" }}#003688{{ else if eq $id "victoria" }}#0098D4{{ else if eq $id "waterloo-city" }}#95CDBA{{ else if eq $id "elizabeth" }}#7156A5{{ else if eq $id "lioness" }}#E9B908{{ else if eq $id "mildmay" }}#0019A8{{ else if eq $id "windrush" }}#D05F0E{{ else if eq $id "weaver" }}#8F9499{{ else if eq $id "suffragette" }}#64A334{{ else if eq $id "liberty" }}#B05F8C{{ else }}#666{{ end }};"></div>
                    <span class="size-h4">{{ .String "name" }}</span>
                  </div>
                  <div class="text-right">
                    <span class="size-h5 {{ if eq $status "Good Service" }}color-positive{{ else if eq $status "Minor Delays" }}color-primary{{ else }}color-negative{{ end }}">{{ $status }}</span>
                  </div>
                </div>
                {{ end }}

theme:
  background-color: 240 15 10
  primary-color: 220 15 85
  contrast-multiplier: 1.2
