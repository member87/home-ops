---
apiVersion: v1
kind: Service
metadata:
  name: gluetun
  namespace: gluetun
  labels:
    app: gluetun
spec:
  selector:
    app: gluetun
  ports:
    # Gluetun Control API - for health checks and port forwarding info
    - name: control
      port: 8000
      targetPort: 8000
      protocol: TCP
    # HTTP Proxy - used by other apps to route traffic through VPN
    - name: http-proxy
      port: 8888
      targetPort: 8888
      protocol: TCP
  type: ClusterIP
---
# Separate service for qBittorrent Web UI
# This makes it easier to create IngressRoute and reference
apiVersion: v1
kind: Service
metadata:
  name: qbittorrent
  namespace: gluetun
  labels:
    app: gluetun
    component: qbittorrent
spec:
  selector:
    app: gluetun
  ports:
    - name: http
      port: 8080
      targetPort: 8080
      protocol: TCP
  type: ClusterIP
