---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-alerting-contactpoints
  namespace: grafana
data:
  contactpoints.yaml: |
    apiVersion: 1
    contactPoints:
      - orgId: 1
        name: discord
        receivers:
          - uid: discord-webhook
            type: discord
            settings:
              url: $DISCORD_WEBHOOK_URL
              title: "{{ .CommonLabels.alertname }}"
              message: |
                **Status:** {{ .Status }}
                **Summary:** {{ .CommonAnnotations.summary }}
                
                **Details:**
                {{ range .Alerts }}
                - **{{ .Labels.alertname }}**: {{ .Annotations.description }}
                  Severity: {{ .Labels.severity }}
                {{ end }}
              use_discord_username: true
            disableResolveMessage: false
