---
apiVersion: v1
kind: ConfigMap
metadata:
  name: ntopng-config
  namespace: ntopng
data:
  ntopng.conf: |
    # ntopng configuration
    
    # Redis connection
    -r=127.0.0.1:6379
    
    # Web interface
    -w=3000
    
    # Disable login (handled by Authelia)
    --disable-login=1
    
    # Community edition mode
    -G=/var/run/ntopng/ntopng.pid
    
    # Data directory
    -d=/var/lib/ntopng
    
    # Enable NetFlow/IPFIX collection on port 2055
    -i=tcp://127.0.0.1:5556
    
    # DNS resolution
    -n=1
    
    # Local networks (adjust to your network)
    --local-networks=192.168.0.0/16,10.0.0.0/8,172.16.0.0/12
    
  nprobe.conf: |
    # nProbe configuration for NetFlow/IPFIX collection
    
    # Collect NetFlow/IPFIX on UDP 2055
    --collector-port=2055
    
    # Send to ntopng via ZMQ
    --zmq=tcp://127.0.0.1:5556
    
    # NetFlow v9 and IPFIX
    --collector-port=2055
    
    # Interface name for display
    -i=none
    -n=none
    
    # Disable local traffic capture
    --disable-cache
